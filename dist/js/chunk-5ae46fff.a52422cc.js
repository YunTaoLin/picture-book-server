(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ae46fff"],{"14c3":function(e,t,r){var a=r("c6b6"),i=r("9263");e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var n=r.call(e,t);if("object"!==typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==a(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},5319:function(e,t,r){"use strict";var a=r("d784"),i=r("825a"),n=r("7b0b"),s=r("50c4"),o=r("a691"),l=r("1d80"),c=r("8aa5"),u=r("14c3"),d=Math.max,f=Math.min,p=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g,v=function(e){return void 0===e?e:String(e)};a("replace",2,(function(e,t,r){return[function(r,a){var i=l(this),n=void 0==r?void 0:r[e];return void 0!==n?n.call(r,i,a):t.call(String(i),r,a)},function(e,n){var l=r(t,e,this,n);if(l.done)return l.value;var p=i(e),g=String(this),m="function"===typeof n;m||(n=String(n));var h=p.global;if(h){var x=p.unicode;p.lastIndex=0}var _=[];while(1){var y=u(p,g);if(null===y)break;if(_.push(y),!h)break;var $=String(y[0]);""===$&&(p.lastIndex=c(g,s(p.lastIndex),x))}for(var b="",w=0,C=0;C<_.length;C++){y=_[C];for(var E=String(y[0]),k=d(f(o(y.index),g.length),0),S=[],j=1;j<y.length;j++)S.push(v(y[j]));var A=y.groups;if(m){var I=[E].concat(S,k,g);void 0!==A&&I.push(A);var H=String(n.apply(void 0,I))}else H=a(E,g,k,S,A,n);k>=w&&(b+=g.slice(w,k)+H,w=k+E.length)}return b+g.slice(w)}];function a(e,r,a,i,s,o){var l=a+e.length,c=i.length,u=m;return void 0!==s&&(s=n(s),u=g),t.call(o,u,(function(t,n){var o;switch(n.charAt(0)){case"$":return"$";case"&":return e;case"`":return r.slice(0,a);case"'":return r.slice(l);case"<":o=s[n.slice(1,-1)];break;default:var u=+n;if(0===u)return t;if(u>c){var d=p(u/10);return 0===d?t:d<=c?void 0===i[d-1]?n.charAt(1):i[d-1]+n.charAt(1):t}o=i[u-1]}return void 0===o?"":o}))}}))},6547:function(e,t,r){var a=r("a691"),i=r("1d80"),n=function(e){return function(t,r){var n,s,o=String(i(t)),l=a(r),c=o.length;return l<0||l>=c?e?"":void 0:(n=o.charCodeAt(l),n<55296||n>56319||l+1===c||(s=o.charCodeAt(l+1))<56320||s>57343?e?o.charAt(l):n:e?o.slice(l,l+2):s-56320+(n-55296<<10)+65536)}};e.exports={codeAt:n(!1),charAt:n(!0)}},"8aa5":function(e,t,r){"use strict";var a=r("6547").charAt;e.exports=function(e,t,r){return t+(r?a(e,t).length:1)}},"90c3":function(e,t,r){"use strict";var a=r("f300"),i=r.n(a);i.a},9263:function(e,t,r){"use strict";var a=r("ad6d"),i=RegExp.prototype.exec,n=String.prototype.replace,s=i,o=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),l=void 0!==/()??/.exec("")[1],c=o||l;c&&(s=function(e){var t,r,s,c,u=this;return l&&(r=new RegExp("^"+u.source+"$(?!\\s)",a.call(u))),o&&(t=u.lastIndex),s=i.call(u,e),o&&s&&(u.lastIndex=u.global?s.index+s[0].length:t),l&&s&&s.length>1&&n.call(s[0],r,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(s[c]=void 0)})),s}),e.exports=s},ad6d:function(e,t,r){"use strict";var a=r("825a");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},c58e:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("div",{staticClass:"container"},[r("div",{staticClass:"col-5"},[r("div",{staticClass:"btn_group"},[r("a",{class:{active:0===e.status},attrs:{href:"javascript:;"},on:{click:function(t){return e.statusHandler(0)}}},[e._v("登入會員")]),r("a",{class:{active:1===e.status},attrs:{href:"javascript:;"},on:{click:function(t){return e.statusHandler(1)}}},[e._v("註冊帳號")])]),r("div",{staticClass:"main"},[0===e.status?r("div",{staticClass:"login_area"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 inner"},[r("form",[r("h2",[e._v("Welcome back！")]),r("label",{attrs:{for:"email"}},[e._m(0),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.login.email,expression:"login.email",modifiers:{trim:!0}}],attrs:{type:"email",id:"email",placeholder:"請輸入電子信箱"},domProps:{value:e.login.email},on:{input:function(t){t.target.composing||e.$set(e.login,"email",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),r("label",{attrs:{for:"password"}},[e._m(1),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.login.password,expression:"login.password",modifiers:{trim:!0}}],attrs:{type:e.eye_login?"text":"password",id:"password",placeholder:"請輸入密碼"},domProps:{value:e.login.password},on:{input:function(t){t.target.composing||e.$set(e.login,"password",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),r("span",{staticClass:"eye",on:{click:function(t){e.eye_login=!e.eye_login}}},[e.eye_login?r("i",{staticClass:"fa fa-eye",attrs:{"aria-hidden":"true"}}):r("i",{staticClass:"fa fa-eye-slash",attrs:{"aria-hidden":"true"}})])]),r("button",{attrs:{disabled:e.loading},on:{click:function(t){return t.preventDefault(),e.loginHandler(t)}}},[e._v(e._s(e.loading?"處理中...":"登入"))])])])])]):r("div",{staticClass:"registered_area"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 inner"},[r("form",[r("h2",[e._v("註冊成為會員")]),r("label",{attrs:{for:"email"}},[e._m(2),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.registered.email,expression:"registered.email",modifiers:{trim:!0}}],attrs:{type:"email",id:"email",placeholder:"設定登入信箱"},domProps:{value:e.registered.email},on:{input:function(t){t.target.composing||e.$set(e.registered,"email",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),r("label",{attrs:{for:"lastname"}},[e._m(3),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.registered.lastname,expression:"registered.lastname",modifiers:{trim:!0}}],attrs:{type:"text",id:"lastname",placeholder:"姓氏"},domProps:{value:e.registered.lastname},on:{input:function(t){t.target.composing||e.$set(e.registered,"lastname",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.registered.firstname,expression:"registered.firstname",modifiers:{trim:!0}}],attrs:{type:"text",id:"firstname",placeholder:"名字"},domProps:{value:e.registered.firstname},on:{input:function(t){t.target.composing||e.$set(e.registered,"firstname",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),r("label",{attrs:{for:"password"}},[e._m(4),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.registered.password,expression:"registered.password",modifiers:{trim:!0}}],attrs:{type:e.eye_regsitered?"text":"password",id:"password",placeholder:"設定密碼"},domProps:{value:e.registered.password},on:{input:function(t){t.target.composing||e.$set(e.registered,"password",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),r("span",{staticClass:"eye",on:{click:function(t){e.eye_regsitered=!e.eye_regsitered}}},[e.eye_regsitered?r("i",{staticClass:"fa fa-eye",attrs:{"aria-hidden":"true"}}):r("i",{staticClass:"fa fa-eye-slash",attrs:{"aria-hidden":"true"}})])]),r("button",{attrs:{disabled:e.loading},on:{click:function(t){return t.preventDefault(),e.registeredHandler(t)}}},[e._v(e._s(e.loading?"處理中...":"Join us！"))])])])])])])])]),r("MyFooter")],1)},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("i",{staticClass:"fa fa-envelope",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("i",{staticClass:"fa fa-key",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("i",{staticClass:"fa fa-envelope",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("i",{staticClass:"fa fa-user-circle-o",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("i",{staticClass:"fa fa-key",attrs:{"aria-hidden":"true"}})])}],n=(r("5319"),r("159b"),r("fd2d")),s=r("1157"),o=r.n(s),l={components:{MyFooter:n["a"]},data:function(){return{status:0,eye_login:!1,eye_regsitered:!1,login:{email:"",password:""},registered:{email:"",lastname:"",firstname:"",password:""},loading:!1}},methods:{statusHandler:function(e){this.status=e},loginHandler:function(){var e=this;return this.login.email?this.login.password?(this.loading=!0,void o.a.ajax({url:"/ajax/login",type:"post",datatype:"json",crossDomain:!0,data:this.login}).done((function(t){e.loading=!1,console.log(t),0==t.err_code?(alert("歡迎回來"+t.user.firstname+"！"),e.$store.state.cart.length>0&&(confirm("購物車目前有商品，是否要合併到會員購物車內?")||e.$store.commit("removeCart")),e.$store.commit("login",t.user),e.$store.dispatch("a_updateCart"),e.$store.state.user.order.forEach((function(t){console.log("查詢一次"),e.$store.dispatch("a_getOrder",t)})),e.$router.go(-1)):1==t.err_code?alert("帳號或密碼錯誤"):alert("伺服器忙線中，請稍後再試")})).fail((function(t){console.log("失敗了"+t),e.loading=!1}))):alert("請輸入密碼"):alert("請輸入email")},registeredHandler:function(){var e=this;return this.registered.email?this.registered.lastname?this.registered.firstname?this.registered.password.length<5?alert("密碼需要6位以上"):(this.loading=!0,void o.a.ajax({url:"/ajax/registered",type:"post",datatype:"json",crossDomain:!0,data:this.registered}).done((function(t){e.loading=!1,console.log(t),0==t.err_code?(e.$store.commit("login",t.user),localStorage.setItem("user",JSON.stringify(t.user)),alert("註冊成功！ "+t.user.firstname+"，歡迎您加入方方繪本"),e.$store.state.cart.length>0&&(confirm("購物車目前有商品，是否要合併到會員購物車內?")||e.$store.commit("removeCart")),e.$store.dispatch("a_updateCart"),e.$store.state.user.order.forEach((function(t){e.$store.dispatch("a_getOrder",t)})),e.$router.go(-1)):1==t.err_code?alert("該信箱已被註冊過囉"):alert("伺服器忙線中，請稍後再試")})).fail((function(){e.loading=!1,alert("伺服器忙線中，請稍後再試")}))):alert("名字不可為空"):alert("姓氏不可為空"):alert("請輸入正確的email")}},mounted:function(){this.$store.state.user._id&&this.$router.replace("/")}},c=l,u=(r("90c3"),r("2877")),d=Object(u["a"])(c,a,i,!1,null,"095d54c9",null);t["default"]=d.exports},d784:function(e,t,r){"use strict";var a=r("9112"),i=r("6eeb"),n=r("d039"),s=r("b622"),o=r("9263"),l=s("species"),c=!n((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=!n((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));e.exports=function(e,t,r,d){var f=s(e),p=!n((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),g=p&&!n((function(){var t=!1,r=/a/;return"split"===e&&(r={},r.constructor={},r.constructor[l]=function(){return r},r.flags="",r[f]=/./[f]),r.exec=function(){return t=!0,null},r[f](""),!t}));if(!p||!g||"replace"===e&&!c||"split"===e&&!u){var m=/./[f],v=r(f,""[e],(function(e,t,r,a,i){return t.exec===o?p&&!i?{done:!0,value:m.call(t,r,a)}:{done:!0,value:e.call(r,t,a)}:{done:!1}})),h=v[0],x=v[1];i(String.prototype,e,h),i(RegExp.prototype,f,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)}),d&&a(RegExp.prototype[f],"sham",!0)}}},f300:function(e,t,r){}}]);
//# sourceMappingURL=chunk-5ae46fff.a52422cc.js.map